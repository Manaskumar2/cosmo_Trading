import{d as ue,r as n,e as me,u as xe,b as pe,h as ge,R as je,j as e}from"./index-7972bc9e.js";import{A as ve,S as ye}from"./Side-8449c87a.js";import{a as i}from"./axios-4a70c6fc.js";import{M as h}from"./Modal-f59123b0.js";/* empty css             */import{I as be,_ as d}from"./index-fce60d6f.js";import"./setPrototypeOf-91672389.js";import"./TransitionWrapper-8fd303ad.js";import"./index-c2cefdb5.js";const Ae=ue({key:"AllUserData",default:null}),c={position:"top-center",duration:2e3,style:{fontSize:"1rem",background:"#fff",color:"#333"}};function Ie(){n.useState(1);const[Z,Se]=n.useState(""),[C,D]=me.useState(!1),U=()=>{D(!1),m(""),p(""),g(""),j(""),w(""),v(""),y("")},[A,K]=n.useState(""),[u,m]=n.useState(""),[x,p]=n.useState(""),[S,g]=n.useState(0),[k,j]=n.useState(""),[V,X]=n.useState(""),[f,v]=n.useState(""),[N,y]=n.useState(""),[B,$]=n.useState(""),[P,T]=n.useState(""),[I,_]=n.useState(""),[F,z]=n.useState(""),[Y,w]=n.useState(""),[M,R]=n.useState(0),[L,q]=n.useState(0),ee=xe(),r=pe(ge),[o,H]=n.useState(1),[te,ke]=n.useState(""),[W,fe]=n.useState([]),[l,E]=je(Ae),se=async s=>{try{let a=r.authToken;const t=await i.put(`https://cosmotrade.live/api/admin/updateUser/${s}`,{bankName:u,accountHolderName:x,bankAccountNo:S,bankId:Y,city:k,ifscCode:f,bankBranchAddress:N,name:B,phoneNumber:P,password:I,parentReferralCode:F,walletAmount:M,rechargeAmount:L},{headers:{Authorization:`Bearer ${a}`}});if(t.status===200)return d.success("User Data Successfully Updated",{...c}),m(""),p(""),g(""),j(""),w(""),v(""),y(""),U(),t}catch(a){a.response?a.response.data.message:a.message}},J=async()=>{try{let s=r.authToken;const a=await i.get("https://cosmotrade.live/api/admin/getAllUsers",{headers:{Authorization:`Bearer ${s}`},params:{queryPageIndex:o,queryPageSortBy:W,bettingAmountSort:A}});a.status===200&&E(a)}catch(s){const a=s.response?s.response.data.message:s.message;console.error("An error occurred:",a)}},[O,Q]=n.useState(""),ae=async()=>{try{let s=r.authToken;const a=await i.get(`https://cosmotrade.live/api/admin/getAllUsers?queryPageFilter=${O}`,{headers:{Authorization:`Bearer ${s}`}});a.status===200&&(E(a),Q(""))}catch(s){console.error("Error searching users:",s)}},ne=async s=>{try{let a=r.authToken;const t=await i.get(`https://cosmotrade.live/api/getTotalTeams/${s}`,{headers:{Authorization:`Bearer ${a}`}});if(t.status===200)return sessionStorage.setItem("downLine",JSON.stringify(t.data)),sessionStorage.setItem("user",JSON.stringify(s)),ee("/admin/downline"),t}catch(a){a.response&&a.response.status===404&&d.error("This user doesn't have downline.",{...c});const t=a.response?a.response.data.message:a.message;console.error(t)}},re=async s=>{try{let a=r.authToken;const t=await i.get(`https://cosmotrade.live/api/admin/userAndBankData/${s}`,{headers:{Authorization:`Bearer ${a}`}});return t.status,t.data.user&&($(t.data.user.name),T(t.data.user.phoneNumber),_(t.data.user.password),z(t.data.user.parentReferralCode),R(t.data.user.walletAmount.toFixed(2)),q(t.data.user.rechargeAmount.toFixed(2)),X(t.data.user._id)),t.data.bankDetails!==null&&(m(t.data.bankDetails.bankName),p(t.data.bankDetails.accountHolderName),g(t.data.bankDetails.bankAccountNo),j(t.data.bankDetails.city),w(t.data.bankDetails._id),v(t.data.bankDetails.ifscCode),y(t.data.bankDetails.bankBranchAddress)),D(!0),console.log(C),t}catch(a){a.response?a.response.data.message:a.message}},oe=async s=>{try{let a=r.authToken;const t=await i.patch(`https://cosmotrade.live/api/admin/activateUser/${s}`,{},{headers:{Authorization:`Bearer ${a}`}});if(t.status===200)return d.success("User Activated",{...c}),t}catch(a){const t=a.response?a.response.data.message:a.message;console.error(t)}},ie=async s=>{try{let a=r.authToken,t=r._id;const b=await i.patch(`https://cosmotrade.live/api/admin/deactivateUser/${s}`,{},{headers:{Authorization:`Bearer ${a}`}});if(b.status===200)return d.success("User Deactivated",{...c}),b}catch(a){const t=a.response?a.response.data.message:a.message;console.error(t)}};n.useEffect(()=>{J()},[o,te,W,A]);const G=l&&l.data.response.totalPages,le=()=>{o>1&&H(o-1)},de=()=>{o<G&&H(o+1)},ce=async(s,a)=>{try{const t=await i.post("https://cosmotrade.live/api/signIn",{phoneNumber:s,password:a});if(t.status===200)return d.success("Welcome to our Gaming Zone",{...c}),localStorage.setItem("authUserToken",JSON.stringify(t.data.data)),window.open("/","_blank"),t}catch(t){const b=t.response?t.response.data.message:t.message;d.error(b||"Something went wrong",{...c})}};function he(s){const a={year:"numeric",month:"numeric",day:"numeric"};return new Date(s).toLocaleDateString(void 0,a)}return e.jsxs("div",{children:[e.jsx(ve,{}),e.jsxs("div",{className:"flex-div",children:[e.jsx(ye,{}),e.jsxs("div",{className:"admin-rightSection",children:[e.jsx(be,{}),e.jsxs("div",{className:"all-user-top",children:[e.jsx("input",{className:"user-input",type:"text",placeholder:"Search by UID",value:O,onChange:s=>Q(s.target.value)}),e.jsx("button",{onClick:ae,type:"button",class:"btn btn-primary",children:"Search"}),e.jsx("button",{onClick:J,type:"button",class:"btn btn-success",children:"All Users"})]}),e.jsxs("div",{className:"sort-dropdown",children:[e.jsx("h5",{children:"Sort by Betting Amount:"}),e.jsxs("select",{onChange:s=>K(s.target.value),value:A,children:[e.jsx("option",{value:"",children:"Select Sort By"}),e.jsx("option",{value:"-1",children:"Ascending"}),e.jsx("option",{value:"1",children:"Descending"})]})]}),e.jsxs("div",{className:"total-wallet-amount",children:[e.jsx("h4",{children:"Total Wallet Amount Of All Users"}),e.jsx("div",{children:l&&l.data.response.totalWalletAmount.toFixed(2)})]}),e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-row table-heading-admin",children:[e.jsx("th",{children:"Sl No"}),e.jsx("th",{children:"UID"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{children:"Password"}),e.jsx("th",{children:"Joining Date"}),e.jsx("th",{children:"Total Downline"}),e.jsx("th",{children:"Parent Id"}),e.jsx("th",{children:"Commission Earned"}),e.jsx("th",{children:"Wallet Amount"}),e.jsx("th",{children:"Total Betting Amount"}),e.jsx("th",{children:"Today Betting Amount"}),e.jsx("th",{children:"User Details"}),e.jsx("th",{children:"Actions"}),e.jsx("th",{children:"Login"})]})}),e.jsx("tbody",{children:l&&l.data.response.getUsers.filter(s=>String(s.UID).toLowerCase().includes(Z.toLowerCase())).map((s,a)=>e.jsxs("tr",{className:"table-row",children:[e.jsx("td",{children:(o-1)*20+a+1}),e.jsx("td",{children:s.UID}),e.jsx("td",{children:s.name}),e.jsx("td",{children:s.phoneNumber}),e.jsx("td",{children:s.password}),e.jsx("td",{children:he(s.createdAt)}),e.jsxs("td",{children:[" ",e.jsx("button",{class:"btn btn-info",onClick:()=>{ne(s._id)},children:"Show"})," "]}),e.jsx("td",{children:s.parentUserUid}),e.jsx("td",{children:s.commissionAmount.toFixed(2)}),e.jsx("td",{style:{fontSize:".9rem",fontWeight:"bold"},children:s.walletAmount.toFixed(2)}),e.jsx("td",{children:s.bettingAmount?s.bettingAmount.toFixed(2):"0"}),e.jsx("td",{children:s.dailyTotalBettingAmount?s.dailyTotalBettingAmount.toFixed(2):"0"}),e.jsxs("td",{children:[e.jsx("button",{type:"button",class:"btn btn-primary","data-toggle":"modal","data-target":"#exampleModalCenter",variant:"primary",onClick:()=>{re(s._id)},children:"Details"}),e.jsxs(h,{show:C,onHide:U,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[e.jsx(h.Header,{closeButton:!0,children:e.jsx(h.Title,{id:"contained-modal-title-vcenter",children:"User Personal & Bank Data"})}),e.jsxs(h.Body,{className:"userModalBody",children:[e.jsxs("div",{children:[e.jsx("h5",{children:"Personal Details"}),e.jsxs("div",{children:["  User Name :  ",e.jsx("input",{type:"text",value:B,onChange:t=>{$(t.target.value)}})," "]}),e.jsxs("div",{children:[" Password :  ",e.jsx("input",{type:"text",value:I,onChange:t=>{_(t.target.value)}})," "]}),e.jsxs("div",{children:[" PhoneNumber :  ",e.jsx("input",{type:"text",value:P,onChange:t=>{T(t.target.value)}})," "]}),e.jsxs("div",{children:[" Parent Referral Code :  ",e.jsx("input",{type:"text",value:F,onChange:t=>{z(t.target.value)}})," "]}),e.jsxs("div",{children:[" Wallet Amount :  ",e.jsx("input",{type:"text",value:M,onChange:t=>{R(t.target.value)}})," "]}),e.jsxs("div",{children:[" Recharge Amount :  ",e.jsx("input",{type:"text",value:L,onChange:t=>{q(t.target.value)}})," "]})]}),u&&x&&e.jsxs("div",{children:[e.jsx("h5",{children:"Bank Details"}),u&&e.jsxs("div",{children:[" Bank Name :  ",e.jsx("input",{type:"text",value:u,onChange:t=>{m(t.target.value)}})," "]}),x&&e.jsxs("div",{children:[" Account Holder Name :  ",e.jsx("input",{type:"text",value:x,onChange:t=>{p(t.target.value)}})," "]}),S&&e.jsxs("div",{children:[" Bank Account No :  ",e.jsx("input",{type:"text",value:S,onChange:t=>{g(t.target.value)}})," "]}),k&&e.jsxs("div",{children:[" City :  ",e.jsx("input",{type:"text",value:k,onChange:t=>{j(t.target.value)}})," "]}),f&&e.jsxs("div",{children:[" IFSC Code :  ",e.jsx("input",{type:"text",value:f,onChange:t=>{v(t.target.value)}})," "]}),N&&e.jsxs("div",{children:[" Bank Branch Address :  ",e.jsx("input",{type:"text",value:N,onChange:t=>{y(t.target.value)}})," "]})]})]}),e.jsx(h.Footer,{style:{textAlign:"center"},children:e.jsx("button",{onClick:()=>se(V),className:"userUpdate",children:"Submit"})})]})]}),e.jsxs("td",{children:[e.jsx("button",{onClick:()=>oe(s._id),className:"activate",children:"Activate"}),e.jsx("button",{onClick:()=>ie(s._id),className:"deactivate",children:"Deactivate"})]}),e.jsx("td",{children:e.jsx("button",{className:"login-user",onClick:()=>{ce(s.phoneNumber,s.password)},children:"Login"})})]},a))})]}),e.jsxs("div",{className:"inc-dec-btns",children:[e.jsx("button",{onClick:le,children:"-"}),e.jsxs("div",{children:[o,"/",G]}),e.jsx("button",{onClick:de,children:"+"})]})]})]})]})}export{Ie as default,c as toastProps};
