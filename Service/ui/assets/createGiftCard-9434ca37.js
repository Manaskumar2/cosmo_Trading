import{r as a,b as w,h as b,j as e}from"./index-f056ec52.js";import{a as y}from"./axios-4a70c6fc.js";import{I as k,_ as c}from"./index-0cd8b721.js";import{A as B,S as R}from"./Side-f7658f34.js";import{A as i}from"./Accordion-b02c6baf.js";import"./setPrototypeOf-02af426c.js";import"./TransitionWrapper-90e190c6.js";import"./react-lifecycles-compat.es-22c986ff.js";const d={position:"top-center",duration:2e3,style:{fontSize:"1rem",background:"#fff",color:"#333"}};function z(){const[l,v]=a.useState(null),[r,o]=a.useState(null),[G,m]=a.useState(!1),n=a.useRef(null);a.useEffect(()=>{const t=localStorage.getItem("gift");if(t){const s=JSON.parse(t);o(s)}else o(null)},[]);const h=w(b),[u,x]=a.useState(""),[f,p]=a.useState(0),[j,g]=a.useState(0),S=async()=>{try{let t=h.authToken;const s=await y.get("https://cosmotrade.live/api/admin/getGiftCode",{headers:{Authorization:`Bearer ${t}`}});if(s.status===200)return v(s.data),console.log(s.data),s}catch(t){const s=t.response?t.response.data.message:t.message;c.error(s||"Gift card not Found.",{...d})}},N=async()=>{try{let t=h.authToken;const s=await y.post("https://cosmotrade.live/api/admin/giftCode",{code:u,maxClaims:f,amount:j},{headers:{Authorization:`Bearer ${t}`}});if(s.status===200)return localStorage.setItem("gift",JSON.stringify(s.data.data)),o(s.data.data),x(""),g(0),p(0),c.success("Successfully Created Gift Card",{...d}),s}catch(t){const s=t.response?t.response.data.message:t.message;c.error(s||"Gift card not Found.",{...d})}},A=()=>{n.current&&(n.current.select(),document.execCommand("copy"),m(!0),setTimeout(()=>{m(!1)},2e3))};return a.useEffect(()=>{S()},[]),e.jsxs("div",{children:[e.jsx(B,{}),e.jsxs("div",{children:[e.jsx(R,{}),e.jsxs("div",{className:"giftCardPage",children:[e.jsx(k,{}),e.jsxs("div",{className:"gift-body",children:[e.jsxs("div",{className:"box",children:[e.jsx("h6",{children:"Create Gift Card"}),e.jsx("p",{children:"Enter Gift card Name"}),e.jsx("input",{type:"text",value:u,onChange:t=>{x(t.target.value)}}),e.jsx("p",{children:"Enter Gift Amount"}),e.jsx("input",{type:"text",value:j,onChange:t=>{g(t.target.value)}}),e.jsx("p",{children:"Enter How many Person You Want to Share"}),e.jsx("input",{type:"text",value:f,onChange:t=>{p(t.target.value)}}),e.jsx("div",{className:"row gift-btn",children:e.jsx("button",{className:"col-12",onClick:N,children:"SUBMIT"})})]}),e.jsx("div",{className:"Gift-code",children:r&&e.jsxs("div",{className:"box",children:[e.jsx("h6",{children:"Your Gift Card"}),e.jsxs("div",{className:"gift-code-row",children:[e.jsx("h5",{children:" Gift Code : "}),e.jsx("input",{type:"text",value:r.code,readOnly:!0,ref:n}),e.jsx("button",{onClick:A,children:G?"Copied":"Copy"})]}),e.jsxs("div",{className:"gift-code-row",children:[e.jsx("h5",{children:" Amount : "}),e.jsx("p",{children:r.amount})]}),e.jsxs("div",{className:"gift-code-row",children:[e.jsx("h5",{children:" Maximum Person Claim : "}),e.jsx("p",{children:r.maxClaims})]})]})})]}),e.jsx("div",{className:"container",children:e.jsx(i,{className:" gift-history",children:l&&l.map((t,s)=>e.jsxs(i.Item,{eventKey:s.toString(),children:[e.jsxs(i.Header,{children:[" ",e.jsxs("p",{style:{width:"30rem",marginRight:"5rem"},children:["Gift Code: ",t.code]})," ",e.jsxs("p",{style:{width:"20rem",marginRight:"5rem"},children:["Claimed By: ",t.claimedByUsers.length]})," ",e.jsxs("p",{children:["Remaining Claims: ",t.maxClaim-t.claimedByUsers.length]})," "]}),e.jsx(i.Body,{children:t.claimedByUsers.map((C,I)=>e.jsx("ol",{children:e.jsxs("div",{children:[e.jsxs("span",{style:{marginRight:"5rem"},children:["UID: ",C.UID]}),"  ",e.jsxs("span",{children:["Name: ",C.name," "]})," "]})},I))})]},s))})})]})]})]})}export{z as default,d as toastProps};
