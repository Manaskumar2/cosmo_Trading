import{r as m,d as f,A,a as P,j as e}from"./index-1e26659f.js";import{A as S,S as k}from"./Side-1596005c.js";import{a as p}from"./axios-4a70c6fc.js";import{P as I}from"./Premium-bd8e10eb.js";import{A as i}from"./Accordion-8da89bef.js";import{I as N,_ as u}from"./index-8fb5d817.js";import"./TransitionWrapper-1219bb77.js";import"./react-lifecycles-compat.es-22c986ff.js";const h={position:"top-center",duration:2e3,style:{fontSize:"1rem",background:"#fff",color:"#333"}};function z(){const[r,c]=m.useState("approved"),[o,g]=m.useState(null),d=f(A),[l,v]=P(I),j=async()=>{try{let t=d.authToken;const s=await p.get(`https://cosmotrade.live/api/admin/getPremiumRequest?status=${r}`,{headers:{Authorization:`Bearer ${t}`}});if(s.status===200)return console.log(s),v(s.data),s}catch(t){t.response?t.response.data.message:t.message}},b=async t=>{try{let s=d.authToken;const a=await p.get(`https://cosmotrade.live/api/admin/getUserDetails/${t}`,{headers:{Authorization:`Bearer ${s}`}});if(a.status===200)return console.log(a),g(a),a}catch(s){const a=s.response?s.response.data.message:s.message;u.error(a||"Something went wrong",{...h})}},x=async(t,s)=>{try{let a=d.authToken;const n=await p.put(`https://cosmotrade.live/api/admin/updatePremiumRequest/${t}`,{adminStatus:s},{headers:{Authorization:`Bearer ${a}`}});if(n.status===200)return u.success("Premium Activated !",{...h}),console.log(n),j(),setTransactionId(""),n}catch(a){const n=a.response?a.response.data.message:a.message;u.error(n||"Something went wrong",{...h})}};return m.useEffect(()=>{j()},[r]),LiveChatWidget.call("hide"),e.jsxs("div",{children:[e.jsx(S,{}),e.jsxs("div",{className:"flex-div",children:[e.jsx(k,{}),e.jsxs("div",{className:"admin-rightSection",children:[e.jsxs("div",{className:"row tab-btns",children:[e.jsx("button",{className:r==="approved"?"col-4 active-tab-btn-adminPage":"col-4 tab-btn",onClick:()=>{c("approved")},children:"Approved List"}),e.jsx("button",{className:r==="pending"?"col-4 active-tab-btn-adminPage":"col-4 tab-btn",onClick:()=>{c("pending")},children:"Pending List"}),e.jsx("button",{className:r==="rejected"?"col-4 active-tab-btn-adminPage":"col-4 tab-btn",onClick:()=>{c("rejected")},children:"Reject List"})]}),e.jsx(N,{}),l&&l.data&&l.data.map((t,s)=>e.jsx(i,{children:e.jsxs(i.Item,{eventKey:"0",children:[e.jsxs(i.Header,{onClick:()=>{b(t.userId)},className:"admin-prime-head",children:[e.jsxs("div",{children:["user Id: ",t.userId]}),e.jsxs("div",{children:["Amount: ",t.amount]}),e.jsxs("div",{children:["Status: ",t.status]})]}),e.jsxs(i.Body,{children:[e.jsxs("p",{children:["UID: ",o&&o.data.data.userDetails.UID]}),e.jsxs("p",{children:["Phone: ",o&&o.data.data.userDetails.phoneNumber]}),r!=="approved"&&r!=="rejected"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"prime-approve-btn",onClick:()=>{x(t.userId,"approved")},children:"Approve"}),e.jsx("button",{className:"prime-reject-btn",onClick:()=>{x(t.userId,"rejected")},children:"Reject"})]})]})]})},s))]})]})]})}export{z as default,h as toastProps};
