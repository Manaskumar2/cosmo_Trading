import{r as d,b as $,h as R,R as _,j as e}from"./index-3900eb01.js";import{A as B,S as I}from"./Side-3e953427.js";import{a as j}from"./axios-4a70c6fc.js";import{P as U}from"./Premium-5c52e19e.js";/* empty css             *//* empty css                   */import{I as M,_ as x}from"./index-4ff9357e.js";import{M as c}from"./Modal-4e23caf1.js";/* empty css                  */import{B as T}from"./Button-83dfd5e0.js";import"./setPrototypeOf-cf8dc84d.js";import"./TransitionWrapper-3677d0bf.js";import"./createWithBsPrefix-9178a395.js";import"./index-3edee245.js";import"./Button-e11e431e.js";const g={position:"top-center",duration:2e3,style:{fontSize:"1rem",background:"#fff",color:"#333"}};function Z(){const[N,b]=d.useState(!1),[r,w]=d.useState(1),[a,m]=d.useState("approved"),[l,A]=d.useState(null),p=$(R),[o,y]=_(U),u=20,v=()=>b(!1),C=()=>b(!0),S=async()=>{try{let t=p.authToken;const s=await j.get(`https://cosmotrade.live/api/admin/getPremiumRequest?status=${a}&page=${r}&pageSize=${u}`,{headers:{Authorization:`Bearer ${t}`}});if(s.status===200)return y(s.data),s}catch(t){t.response?t.response.data.message:t.message}},D=async t=>{try{let s=p.authToken;const n=await j.get(`https://cosmotrade.live/api/admin/getUserDetails/${t}`,{headers:{Authorization:`Bearer ${s}`}});if(n.status===200)return A(n),C(),n}catch(s){const n=s.response?s.response.data.message:s.message;x.error(n||"Something went wrong",{...g})}},f=async(t,s,n)=>{try{let i=p.authToken;const h=await j.put(`https://cosmotrade.live/api/admin/updatePremiumRequest/${t}`,{adminStatus:s,premiumId:n},{headers:{Authorization:`Bearer ${i}`}});if(h.status===200)return x.success("Premium Updated!",{...g}),S(),h}catch(i){const h=i.response?i.response.data.message:i.message;x.error(h||"Something went wrong",{...g})}};d.useEffect(()=>{S()},[a,r]);const P=t=>{w(t)},k=Math.ceil((o&&o.data?o.data.length:0)/u);return e.jsxs("div",{children:[e.jsx(B,{}),e.jsxs("div",{className:"flex-div",children:[e.jsx(I,{}),e.jsxs("div",{className:"admin-rightSection",children:[e.jsxs("div",{className:"row tab-btns",children:[e.jsx("button",{className:a==="approved"?"col-4 active-tab-btn-adminPage":"col-4 tab-btn",onClick:()=>{m("approved")},children:"Approved List"}),e.jsx("button",{className:a==="pending"?"col-4 active-tab-btn-adminPage":"col-4 tab-btn",onClick:()=>{m("pending")},children:"Pending List"}),e.jsx("button",{className:a==="rejected"?"col-4 active-tab-btn-adminPage":"col-4 tab-btn",onClick:()=>{m("rejected")},children:"Reject List"})]}),e.jsx(M,{}),e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-row",children:[e.jsx("th",{children:"Sl No"}),e.jsx("th",{children:"User Id"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Request Time"}),a!=="pending"&&e.jsx("th",{children:"Action Time"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Details"})]})}),e.jsx("tbody",{children:o&&o.data&&o.data.map((t,s)=>e.jsxs("tr",{className:"table-row",children:[e.jsx("td",{children:(r-1)*u+s+1}),e.jsx("td",{children:t._id}),e.jsx("td",{children:t.amount}),e.jsx("td",{children:new Date(t.createdAt).toLocaleString()}),a!=="pending"&&e.jsx("td",{children:new Date(t.updatedAt).toLocaleString()}),e.jsx("td",{children:t.status}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{D(t.userId)},children:"Details"})}),e.jsxs(c,{show:N,onHide:v,centered:!0,children:[e.jsx(c.Header,{closeButton:!0,children:e.jsx(c.Title,{children:"User Details"})}),e.jsx(c.Body,{className:"userModalBody",children:e.jsxs("div",{children:[e.jsxs("p",{children:["UID: ",l&&l.data.data.userDetails.UID]}),e.jsxs("p",{children:["Phone: ",l&&l.data.data.userDetails.phoneNumber]}),a!=="approved"&&a!=="rejected"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"prime-approve-btn",onClick:()=>{f(t.userId,"approved",t._id)},children:"Approve"}),e.jsx("button",{className:"prime-reject-btn",onClick:()=>{f(t.userId,"rejected",t._id)},children:"Reject"})]})]})}),e.jsx(c.Footer,{children:e.jsx(T,{variant:"secondary",onClick:v,children:"Close"})})]})]},s))})]}),e.jsxs("div",{className:"pagination-prime",children:[e.jsx("button",{onClick:()=>P(r-1),disabled:r===1,children:"-"}),e.jsxs("span",{children:[r," / ",k]}),e.jsx("button",{onClick:()=>P(r+1),disabled:r===k,children:"+"})]})]})]})]})}export{Z as default,g as toastProps};
