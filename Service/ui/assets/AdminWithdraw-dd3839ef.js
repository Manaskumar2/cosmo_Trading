import{r as d,d as v,A as w,j as a}from"./index-525861f9.js";import{A as k,S as N}from"./Side-70e32627.js";import{a as c}from"./axios-4a70c6fc.js";import{A as l}from"./Accordion-6b8a5c4e.js";import{I as D,_ as y}from"./index-22050d29.js";import"./TransitionWrapper-506a1b1b.js";import"./react-lifecycles-compat.es-22c986ff.js";const C={position:"top-center",duration:2e3,style:{fontSize:"1rem",background:"#fff",color:"#333"}};function _(){const[i,h]=d.useState("confirmed"),[n,j]=d.useState(null),[u,f]=d.useState(null),[r,g]=d.useState(null),o=v(w),b=async e=>{try{let s=o.authToken;const t=await c.get(`https://cosmotrade.live/api/admin/getUserDetails/${e}`,{headers:{Authorization:`Bearer ${s}`}});if(t.status===200)return console.log(t),j(t),t}catch(s){s.response?s.response.data.message:s.message}},p=async()=>{try{let e=o.authToken;const s=await c.get(`https://cosmotrade.live/api/admin/getWithdrawRequest?status=${i}`,{headers:{Authorization:`Bearer ${e}`}});if(s.status===200)return console.log(s),f(s.data),s}catch(e){e.response?e.response.data.message:e.message}},A=async e=>{try{let s=o.authToken;const t=await c.get(`https://cosmotrade.live/api/admin/getbankDetails/${e}`,{headers:{Authorization:`Bearer ${s}`}});if(t.status===200)return console.log(t),g(t),t}catch(s){s.response?s.response.data.message:s.message}},x=async(e,s)=>{try{let t=o.authToken;const m=await c.put(`https://cosmotrade.live/api/admin/conformWithdrawRequest/${e}`,{newStatus:s},{headers:{Authorization:`Bearer ${t}`}});if(m.status===200)return y.success("Withdraw request confirmed",{...C}),p(),console.log(m),m}catch(t){t.response?t.response.data.message:t.message}};return d.useEffect(()=>{p()},[i]),a.jsxs("div",{children:[a.jsx(k,{}),a.jsxs("div",{className:"flex-div",children:[a.jsx(N,{}),a.jsxs("div",{className:"admin-rightSection",children:[a.jsxs("div",{className:"row tab-btns",children:[a.jsx("button",{className:i==="confirmed"?"col-4 active-tab-btn-adminPage":"col-4 tab-btn",onClick:()=>{h("confirmed")},children:"Approved List"}),a.jsx("button",{className:i==="pending"?"col-4 active-tab-btn-adminPage":"col-4 tab-btn",onClick:()=>{h("pending")},children:"Pending List"}),a.jsx("button",{className:i==="cancelled"?"col-4 active-tab-btn-adminPage":"col-4 tab-btn",onClick:()=>{h("cancelled")},children:"Reject List"})]}),a.jsx(D,{}),u&&u.data.map((e,s)=>a.jsx(l,{children:a.jsxs(l.Item,{eventKey:s,children:[a.jsx(l.Header,{onClick:()=>{A(e.userId),b(e.userId)},children:a.jsxs("div",{className:"admin-Widthdraw-box",children:[a.jsxs("p",{children:["Order : ",e._id]}),a.jsxs("p",{children:["Amount : ",e.withdrawAmount]}),a.jsxs("p",{children:["Status : ",e.status]})]})}),a.jsx(l.Body,{children:a.jsxs("div",{className:"flex-div",children:[a.jsxs("div",{className:"admin-withdraw-data",children:[a.jsx("h3",{children:"User Details"}),a.jsxs("p",{children:["UID: ",n&&n.data.data.userDetails.UID]}),a.jsxs("p",{children:["Phone: ",n&&n.data.data.userDetails.phoneNumber]}),a.jsxs("p",{children:["Wallet Amount: ",n&&n.data.data.userDetails.walletAmount]}),a.jsxs("p",{children:["Commission Amount: ",n&&n.data.data.userDetails.commissionAmount]}),a.jsxs("p",{children:["Winning Amount: ",n&&n.data.data.userDetails.winningAmount]}),a.jsxs("p",{children:["Downline Count: ",n&&n.data.data.userDetails.downline.length]})]}),a.jsxs("div",{style:{marginLeft:"6rem"},children:[a.jsx("h3",{children:"Bank Data"}),r&&a.jsxs("div",{className:"admin-withdraw-data",children:[a.jsxs("p",{children:["Account Holder Name: ",r.data.data.accountHolderName]}),a.jsxs("p",{children:["Email: ",r.data.data.email]}),a.jsxs("p",{children:["Bank Name: ",r.data.data.bankName]}),a.jsxs("p",{children:["Account No: ",r.data.data.bankAccountNo]}),a.jsxs("p",{children:["Ifsc Code: ",r.data.data.ifscCode]}),a.jsxs("p",{children:["Branch Address: ",r.data.data.bankBranchAddress]}),a.jsxs("p",{children:["City: ",r.data.data.city]}),e.status!=="confirmed"&&e.status!=="cancelled"&&a.jsx(a.Fragment,{children:a.jsxs("div",{className:"flex-div",children:[a.jsx("button",{onClick:()=>{x(e._id,"confirmed")},className:"prime-approve-btn",children:"Approve"})," ",a.jsx("button",{onClick:()=>{x(e._id,"cancelled")},className:"prime-reject-btn",children:"Reject"})]})})]})]})]})})]})},s))]})]})]})}export{_ as default,C as toastProps};
