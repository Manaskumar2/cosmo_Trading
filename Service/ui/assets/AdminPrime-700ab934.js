import{r as l,d as P,h as S,a as A,j as e}from"./index-607e5c7b.js";import{A as k,S as N}from"./Side-aaaad52e.js";import{a as u}from"./axios-4a70c6fc.js";import{P as I}from"./Premium-301c997a.js";/* empty css                   */import{A as d}from"./Accordion-b4645290.js";import{I as y,_ as h}from"./index-300575e3.js";import"./TransitionWrapper-e4bf9383.js";import"./react-lifecycles-compat.es-22c986ff.js";const j={position:"top-center",duration:2e3,style:{fontSize:"1rem",background:"#fff",color:"#333"}};function q(){const[a,c]=l.useState("approved"),[o,v]=l.useState(null),m=P(S),[p,b]=A(I),x=async()=>{try{let s=m.authToken;const t=await u.get(`https://cosmotrade.live/apiadmin/getPremiumRequest?status=${a}`,{headers:{Authorization:`Bearer ${s}`}});if(t.status===200)return b(t.data),t}catch(s){s.response?s.response.data.message:s.message}},f=async s=>{try{let t=m.authToken;const r=await u.get(`https://cosmotrade.live/apiadmin/getUserDetails/${s}`,{headers:{Authorization:`Bearer ${t}`}});if(r.status===200)return v(r),r}catch(t){const r=t.response?t.response.data.message:t.message;h.error(r||"Something went wrong",{...j})}},g=async(s,t,r)=>{try{let n=m.authToken;const i=await u.put(`https://cosmotrade.live/apiadmin/updatePremiumRequest/${s}`,{adminStatus:t,premiumId:r},{headers:{Authorization:`Bearer ${n}`}});if(i.status===200)return h.success("Premium Updated !",{...j}),x(),i}catch(n){const i=n.response?n.response.data.message:n.message;h.error(i||"Something went wrong",{...j})}};return l.useEffect(()=>{x()},[a]),e.jsxs("div",{children:[e.jsx(k,{}),e.jsxs("div",{className:"flex-div",children:[e.jsx(N,{}),e.jsxs("div",{className:"admin-rightSection",children:[e.jsxs("div",{className:"row tab-btns",children:[e.jsx("button",{className:a==="approved"?"col-4 active-tab-btn-adminPage":"col-4 tab-btn",onClick:()=>{c("approved")},children:"Approved List"}),e.jsx("button",{className:a==="pending"?"col-4 active-tab-btn-adminPage":"col-4 tab-btn",onClick:()=>{c("pending")},children:"Pending List"}),e.jsx("button",{className:a==="rejected"?"col-4 active-tab-btn-adminPage":"col-4 tab-btn",onClick:()=>{c("rejected")},children:"Reject List"})]}),e.jsx(y,{}),p&&p.data&&p.data.map((s,t)=>e.jsx(d,{children:e.jsxs(d.Item,{eventKey:"0",children:[e.jsxs(d.Header,{onClick:()=>{f(s.userId)},className:"admin-prime-head",children:[e.jsxs("div",{children:["user Id: ",s.userId]}),e.jsxs("div",{children:["Amount: ",s.amount]}),e.jsxs("div",{children:["Status: ",s.status]})]}),e.jsxs(d.Body,{children:[e.jsxs("p",{children:["UID: ",o&&o.data.data.userDetails.UID]}),e.jsxs("p",{children:["Phone: ",o&&o.data.data.userDetails.phoneNumber]}),a!=="approved"&&a!=="rejected"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"prime-approve-btn",onClick:()=>{g(s.userId,"approved",s._id)},children:"Approve"}),e.jsx("button",{className:"prime-reject-btn",onClick:()=>{g(s.userId,"rejected",s._id)},children:"Reject"})]})]})]})},t))]})]})]})}export{q as default,j as toastProps};
