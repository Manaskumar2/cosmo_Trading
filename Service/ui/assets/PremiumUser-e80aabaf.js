import{u as y,r as c,b as k,h as M,R as C,j as e}from"./index-3900eb01.js";import{A as I,S as D}from"./Side-3e953427.js";import{a as d}from"./axios-4a70c6fc.js";/* empty css             */import{P as E}from"./Premium-5c52e19e.js";/* empty css                   */import{I as _,_ as o}from"./index-4ff9357e.js";const a={position:"top-center",duration:2e3,style:{fontSize:"1rem",background:"#fff",color:"#333"}};function B(){const f=y(),[l,m]=c.useState(""),[h,u]=c.useState(1),i=20,x=k(M),[n,S]=C(E),p=async()=>{try{let s=x.authToken;const t=await d.get("https://cosmotrade.live/api/admin/getPremiumUsers",{headers:{Authorization:`Bearer ${s}`}});if(t.status===200)return S(t.data),t}catch(s){const t=s.response?s.response.data.message:s.message;o.error(t||"Something went wrong",{...a})}},b=async()=>{try{let s=x.authToken;const t=await d.post("https://cosmotrade.live/api/admin/franchisecommissions",{amount:l},{headers:{Authorization:`Bearer ${s}`}});if(t.status===200)return p(),o.success("Commission Successfully Distributed!",{...a}),m(""),t}catch(s){const t=s.response?s.response.data.message:s.message;o.error(t||"Something went wrong",{...a})}};c.useEffect(()=>{p()},[]);const N=()=>{u(s=>Math.min(s+1,Math.ceil(n.response.getUsers.length/i)))},P=n&&n.response&&n.response.getUsers&&Math.ceil(n.response.getUsers.length/i),v=()=>{u(s=>Math.max(s-1,1))},w=async(s,t)=>{try{const r=await d.post("https://cosmotrade.live/api/signIn",{phoneNumber:s,password:t});if(r.status===200)return o.success("Welcome to our Gaming Zone",{...a}),sessionStorage.setItem("authUserToken",JSON.stringify(r.data.data)),f("/"),window.location.reload(),r}catch(r){const U=r.response?r.response.data.message:r.message;o.error(U||"Something went wrong",{...a})}},g=h*i,A=g-i,j=n&&n.response&&n.response.getUsers.slice(A,g);return e.jsxs("div",{children:[e.jsx(I,{}),e.jsxs("div",{className:"flex-div",children:[e.jsx(D,{}),e.jsxs("div",{className:"admin-rightSection",children:[e.jsxs("div",{className:"Amount-distribution-box",children:[e.jsx("h5",{children:"Enter Premium Member Distribution Amount"}),e.jsx("div",{children:e.jsx("input",{type:"number",value:l,onChange:s=>{m(s.target.value)},placeholder:"Enter Amount"})}),e.jsx("button",{onClick:b,children:"SEND COMMISSION"})]}),e.jsx(_,{}),e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-row",children:[e.jsx("th",{children:"Serial No."}),e.jsx("th",{children:"UID"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Phone No"}),e.jsx("th",{children:"Commission Amount"}),e.jsx("th",{children:"Wallet Amount"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:j&&j.map((s,t)=>e.jsxs("tr",{className:"table-row",children:[e.jsx("td",{children:t+1}),e.jsx("td",{children:s.UID}),e.jsx("td",{children:s.name}),e.jsx("td",{children:s.phoneNumber}),e.jsx("td",{children:s.commissionAmount.toFixed(2)}),e.jsx("td",{children:s.walletAmount.toFixed(2)}),e.jsx("td",{children:e.jsx("button",{onClick:()=>{w(s.phoneNumber,s.password)},className:"login-user",children:"Login"})})]},t))})]}),e.jsxs("div",{className:"pagination-prime",children:[e.jsx("button",{onClick:v,children:"-"}),e.jsxs("span",{children:[h,"/",P]}),e.jsx("button",{onClick:N,children:"+"})]})]})]})]})}export{B as default,a as toastProps};
