import{r,d as N,h as w,j as t}from"./index-694ab1ac.js";import{A as C,S as R}from"./Side-0ea2c36f.js";import{a as d}from"./axios-4a70c6fc.js";/* empty css                  */import{A as l}from"./Accordion-ee8f4720.js";import{I as $,_ as p}from"./index-670f9c0f.js";import"./TransitionWrapper-5b168f32.js";import"./react-lifecycles-compat.es-22c986ff.js";const m={position:"top-center",duration:2e3,style:{fontSize:"1rem",background:"#fff",color:"#333"}};function T(){const[o,u]=r.useState("confirmed"),i=N(w),[c,y]=r.useState(null),[v,h]=r.useState(null),[g,x]=r.useState(""),[j,I]=r.useState(null),k=e=>{const s=e.target.files[0];h(s),console.log(s)},S=async()=>{try{const e=new FormData;e.append("image",v),e.append("upiId",g);let s=i._id,a=i.authToken;const n=await d.post(`https://cosmotrade.live/api/admin/uploadQrcode/${s}`,e,{headers:{Authorization:`Bearer ${a}`},"Content-Type":"multipart/form-data"});if(n.status===201)return p.success("Qr code uploaded!",{...m}),x(""),h(null),n}catch(e){e.response?e.response.data.message:e.message}},A=async e=>{try{let s=i.authToken;const a=await d.get(`https://cosmotrade.live/api/admin/getUserDetails/${e}`,{headers:{Authorization:`Bearer ${s}`}});if(a.status===200)return y(a),a}catch(s){s.response?s.response.data.message:s.message}},f=async()=>{try{let e=i.authToken;const s=await d.get(`https://cosmotrade.live/api/admin/payment-request?status=${o}`,{headers:{Authorization:`Bearer ${e}`}});if(s.status===200)return I(s.data),s}catch(e){const s=e.response?e.response.data.message:e.message;p.error(s||"Something went wrong",{...m})}},b=async(e,s)=>{try{let a=i.authToken;const n=await d.patch(`https://cosmotrade.live/api/admin/confirm-payment/${e}`,{status:s},{headers:{Authorization:`Bearer ${a}`}});if(n.status===200)return p.success("Recharge request confirmed",{...m}),f(),n}catch(a){const n=a.response?a.response.data.message:a.message;p.error(n||"Something went wrong",{...m})}};return r.useEffect(()=>{f()},[o]),t.jsxs("div",{children:[t.jsx(C,{}),t.jsxs("div",{className:"flex-div",children:[t.jsx(R,{}),t.jsxs("div",{className:"admin-rightSection",children:[t.jsx($,{}),t.jsxs("form",{className:"form-rechrge",children:[t.jsx("h3",{className:"text-centre",children:"Submit Qr Code"}),t.jsx("label",{children:"Enter Qr Code Image"}),t.jsx("input",{type:"file",accept:".jpg, .jpeg, .png, .svg",onChange:k}),t.jsx("label",{children:"Enter UPI Id"}),t.jsx("input",{type:"text",value:g,placeholder:"Enter UPI Id",onChange:e=>{x(e.target.value)}}),t.jsx("button",{onClick:S,children:"Submit"})]}),t.jsxs("div",{className:"row tab-btns",children:[t.jsx("button",{className:o==="confirmed"?"col-4 active-tab-btn-adminPage":"col-4 tab-btn",onClick:()=>{u("confirmed")},children:"Approved List"}),t.jsx("button",{className:o==="pending"?"col-4 active-tab-btn-adminPage":"col-4 tab-btn",onClick:()=>{u("pending")},children:"Pending List"}),t.jsx("button",{className:o==="cancelled"?"col-4 active-tab-btn-adminPage":"col-4 tab-btn",onClick:()=>{u("cancelled")},children:"Reject List"})]}),j&&j.map((e,s)=>t.jsx(l,{children:t.jsxs(l.Item,{eventKey:s,children:[t.jsxs(l.Header,{onClick:()=>{A(e.userId)},children:[t.jsxs("p",{style:{marginRight:"3.5rem"},children:["Order: ",e._id]}),t.jsxs("p",{style:{marginRight:"3.5rem"},children:["Amount: ",e.amount]}),t.jsxs("p",{style:{marginRight:"3.5rem"},children:["Status: ",e.status]})]}),t.jsxs(l.Body,{children:[t.jsxs("p",{children:["UID: ",c&&c.data.data.userDetails.UID]}),t.jsxs("p",{children:["Phone: ",c&&c.data.data.userDetails.phoneNumber]}),t.jsxs("p",{children:["Upi ReferenceNo: ",e.upiReferenceNo]}),t.jsxs("p",{children:["Upi Id: ",e.upiId]}),e.status!=="confirmed"&&e.status!=="cancelled"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"prime-approve-btn",onClick:()=>{b(e._id,"confirm")},children:"Approve"}),t.jsx("button",{onClick:()=>{b(e._id,"cancel")},className:"prime-reject-btn",children:"Reject"})]})]})]})},s))]})]})]})}export{T as default,m as toastProps};
