import{r,u as w,d as I,A as U,j as e,L as k}from"./index-706efa67.js";import{M as A}from"./index-b800b4e0.js";/* empty css                        */import{b as M}from"./back-button 1-53e9bab3.js";import{a as h}from"./axios-4a70c6fc.js";import{I as T,_ as l}from"./index-afb382da.js";import{r as C,l as P}from"./RightArr-753548b2.js";import"./index-2b4f2ee0.js";import"./react-lifecycles-compat.es-22c986ff.js";const $="/assets/receive-bb5ee324.svg",W="/assets/send-989cf09b.svg",i={position:"top-center",duration:2e3,style:{fontSize:"1rem",background:"#fff",color:"#333"}};function F(){const[o,p]=r.useState(1),v=w(),[n,y]=r.useState(null),[c,N]=r.useState(null),a=I(U),[d,x]=r.useState(0),[m,g]=r.useState(""),[D,u]=r.useState(!1),b=async()=>{try{let s=a.authToken;(await h.post("https://cosmotrade.live/api/walletToWallet",{amount:m,receiverUID:d},{headers:{Authorization:`Bearer ${s}`}})).status===200&&(l.success("Amount successfully Sent!",{...i}),g(""),x(0),u(!1),f())}catch(s){if(s.response&&s.response.status===400){const t="You cannot send money until remaining bet amount 0";l.error(t,{...i})}else{const t=s.response?s.response.data.message:s.message;l.error(t||"Something went wrong",{...i})}}},j=()=>{u(!1)},S=async()=>{try{let s=a.authToken;const t=await h.get(`https://cosmotrade.live/api/getUserProfile/${d} `,{headers:{Authorization:`Bearer ${s}`}});if(t.status===200)return N(t.data),u(!0),t}catch(s){const t=s.response?s.response.data.message:s.message;l.error(t||"Something went wrong",{...i})}},f=async()=>{try{let s=a.authToken;const t=await h.get("https://cosmotrade.live/api/getwalletToWallet",{params:{page:o},headers:{Authorization:`Bearer ${s}`}});if(t.status===200)return y(t.data),t}catch(s){if(s.response.status===403)return v("/signIn"),response;const t=s.response?s.response.data.message:s.message;l.error(t||"Something went wrong",{...i})}};return r.useEffect(()=>{f()},[o]),e.jsxs("div",{className:"security",children:[e.jsx(T,{}),e.jsx("div",{className:"container-fluid PromoNav",children:e.jsxs("div",{className:"row",children:[e.jsx(k,{to:"/profile",className:"col-2",children:e.jsx("img",{src:M,alt:""})}),e.jsx("div",{className:"col-8",children:"Wallet To Wallet"}),e.jsx("div",{className:"col-2"})]})}),e.jsxs("div",{className:"sucurity-body ",style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsxs("div",{className:"security-form ",children:[e.jsx("p",{style:{color:"#fff",marginTop:"1rem"},children:"UID"}),e.jsx("input",{type:"text",placeholder:"Enter UID",value:d,onChange:s=>{x(s.target.value)}}),e.jsx("p",{style:{color:"#fff",marginTop:"1rem"},children:"Amount"}),e.jsx("input",{type:"text",placeholder:"Enter Amount",value:m,onChange:s=>{g(s.target.value)}}),e.jsx("button",{onClick:()=>{S()},children:"SUBMIT"})]}),e.jsxs("div",{className:"container",style:{margin:"2.5rem 0"},children:[n&&n.data.transactions.map((s,t)=>e.jsxs("div",{className:"row transaction-data",children:[e.jsx("div",{className:"col-3",children:a.UID===s.sender?e.jsx("img",{src:W,alt:""}):e.jsx("img",{src:$,alt:""})}),e.jsxs("div",{className:"col-6",children:["  ",e.jsx("p",{style:{textAlign:"left"},children:a.UID===s.sender?s.receiver:s.sender}),e.jsx("p",{style:{fontSize:".8rem",textAlign:"left"},children:new Date(s.createdAt).toLocaleString()})]}),e.jsx("div",{className:`col-3 ${a.UID===s.sender?"text-red":"text-green"}`,children:a.UID===s.sender?e.jsxs("span",{children:["- ₹",s.amount]}):e.jsxs("span",{className:"text-green",children:["+ ₹",s.amount]})})]},t)),n&&e.jsxs("div",{className:"pagination-buttons-p2p",children:[e.jsxs("button",{onClick:()=>{p(Math.max(o-1,1))},children:["  ",e.jsx("img",{src:C,alt:""})," "]}),n.data.totalPages&&e.jsxs("div",{children:[o,"/",n.data.totalPages]}),e.jsxs("button",{onClick:()=>{p(Math.min(o+1,n.data.totalPages))},children:["  ",e.jsx("img",{src:P,alt:""})," "]})]})]})]}),e.jsx(A,{isOpen:D,onRequestClose:j,children:e.jsxs("div",{className:"modal-body-w2w",children:[e.jsx("div",{children:c&&e.jsxs("div",{className:"userDetaisW2W",children:[e.jsx("h2",{children:"User Details"}),e.jsxs("p",{children:["Name: ",c.data.userDetails.name]}),e.jsxs("p",{children:["UID: ",c.data.userDetails.UID]}),e.jsxs("p",{children:["Phone no: ",c.data.userDetails.phoneNumber]}),e.jsxs("p",{children:["Amount: ",m]})]})}),e.jsx("button",{className:"confirm",onClick:b,children:"Confirm Submit"}),e.jsx("button",{className:"close",onClick:j,children:"Close"})]})})]})}export{F as default,i as toastProps};
