import{r as d,b as R,h as D,R as $,j as e}from"./index-86a585b6.js";import{A as _,S as B}from"./Side-b868dbef.js";import{a as u}from"./axios-4a70c6fc.js";import{P as I}from"./Premium-541778a3.js";/* empty css             *//* empty css                   */import{I as U,_ as j}from"./index-069b58ee.js";import{M as c}from"./Modal-3ccf5755.js";/* empty css                  */import{B as q}from"./Button-50b7d9ba.js";import"./setPrototypeOf-b3cbb156.js";import"./TransitionWrapper-3d8a2925.js";import"./index-a661d4fc.js";import"./Button-3afdd3d0.js";const x={position:"top-center",duration:2e3,style:{fontSize:"1rem",background:"#fff",color:"#333"}};function X(){const[f,g]=d.useState(!1),[n,A]=d.useState(1),[r,h]=d.useState("approved"),[l,k]=d.useState(null),m=R(D),[a,N]=$(I),w=20,b=()=>g(!1),y=()=>g(!0),v=async()=>{try{let t=m.authToken;const s=await u.get(`https://cosmotrade.live/api/admin/getPremiumRequest?status=${r}&page=${n}`,{headers:{Authorization:`Bearer ${t}`}});if(s.status===200)return N(s.data),console.log(s.data),s}catch(t){t.response?t.response.data.message:t.message}},C=async t=>{try{let s=m.authToken;const o=await u.get(`https://cosmotrade.live/api/admin/getUserDetails/${t}`,{headers:{Authorization:`Bearer ${s}`}});if(o.status===200)return k(o),y(),o}catch(s){const o=s.response?s.response.data.message:s.message;j.error(o||"Something went wrong",{...x})}},P=async(t,s,o)=>{try{let i=m.authToken;const p=await u.put(`https://cosmotrade.live/api/admin/updatePremiumRequest/${t}`,{adminStatus:s,premiumId:o},{headers:{Authorization:`Bearer ${i}`}});if(p.status===200)return j.success("Premium Updated!",{...x}),v(),p}catch(i){const p=i.response?i.response.data.message:i.message;j.error(p||"Something went wrong",{...x})}};d.useEffect(()=>{v()},[r,n]);const S=t=>{A(t)};return e.jsxs("div",{children:[e.jsx(_,{}),e.jsxs("div",{className:"flex-div",children:[e.jsx(B,{}),e.jsxs("div",{className:"admin-rightSection",children:[e.jsxs("div",{className:"row tab-btns",children:[e.jsx("button",{className:r==="approved"?"col-4 active-tab-btn-adminPage":"col-4 tab-btn",onClick:()=>{h("approved")},children:"Approved List"}),e.jsx("button",{className:r==="pending"?"col-4 active-tab-btn-adminPage":"col-4 tab-btn",onClick:()=>{h("pending")},children:"Pending List"}),e.jsx("button",{className:r==="rejected"?"col-4 active-tab-btn-adminPage":"col-4 tab-btn",onClick:()=>{h("rejected")},children:"Reject List"})]}),e.jsx(U,{}),e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-row table-heading-admin",children:[e.jsx("th",{children:"Sl No"}),e.jsx("th",{children:"User Id"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Request Time"}),r!=="pending"&&e.jsx("th",{children:"Action Time"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Details"})]})}),e.jsx("tbody",{children:a&&a.response&&a.response.premiumApplyRequest&&a.response.premiumApplyRequest.map((t,s)=>e.jsxs("tr",{className:"table-row",children:[e.jsx("td",{children:(n-1)*w+s+1}),e.jsx("td",{children:t._id}),e.jsx("td",{children:t.amount}),e.jsx("td",{children:new Date(t.createdAt).toLocaleString()}),r!=="pending"&&e.jsx("td",{children:new Date(t.updatedAt).toLocaleString()}),e.jsx("td",{children:t.status}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{C(t.userId)},children:"Details"})}),e.jsxs(c,{show:f,onHide:b,centered:!0,children:[e.jsx(c.Header,{closeButton:!0,children:e.jsx(c.Title,{children:"User Details"})}),e.jsx(c.Body,{className:"userModalBody",children:e.jsxs("div",{children:[e.jsxs("p",{children:["UID: ",l&&l.data.data.userDetails.UID]}),e.jsxs("p",{children:["Phone: ",l&&l.data.data.userDetails.phoneNumber]}),r!=="approved"&&r!=="rejected"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"prime-approve-btn",onClick:()=>{P(t.userId,"approved",t._id)},children:"Approve"}),e.jsx("button",{className:"prime-reject-btn",onClick:()=>{P(t.userId,"rejected",t._id)},children:"Reject"})]})]})}),e.jsx(c.Footer,{children:e.jsx(q,{variant:"secondary",onClick:b,children:"Close"})})]})]},s))})]}),a&&a.response&&a.response.totalPages&&e.jsxs("div",{className:"pagination-prime",children:[e.jsx("button",{onClick:()=>S(n-1),disabled:n===1,children:"-"}),e.jsxs("span",{children:[n," / ",a&&a.response&&a.response.totalPages]}),e.jsx("button",{onClick:()=>S(n+1),disabled:n===a.response.totalPages,children:"+"})]})]})]})]})}export{X as default,x as toastProps};
