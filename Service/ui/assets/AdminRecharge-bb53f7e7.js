import{r as n,d as S,A as N,j as e}from"./index-0d5ab529.js";import{A as R,S as C}from"./Side-1cecf607.js";import{a as i}from"./axios-4a70c6fc.js";import{A as d}from"./Accordion-b7586505.js";import{I as $,_ as f}from"./index-060a0471.js";import"./TransitionWrapper-fb7d5353.js";import"./react-lifecycles-compat.es-22c986ff.js";const y={position:"top-center",duration:2e3,style:{fontSize:"1rem",background:"#fff",color:"#333"}};function B(){const[u,l]=n.useState("confirmed"),o=S(N),[c,v]=n.useState(null),[p,h]=n.useState(""),[m,x]=n.useState(""),[j,b]=n.useState(null),k=async s=>{s.preventDefault();try{let t=o._id,a=o.authToken;const r=await i.post(`https://cosmotrade.live/api/admin/uploadQrcode/${t}`,{upiId:p,qrCode:m},{headers:{Authorization:`Bearer ${a}`}});if(r.status===201)return f.success("Qr code uploaded!",{...y}),h(""),x(""),console.log(r),r}catch(t){t.response?t.response.data.message:t.message}},I=async s=>{try{let t=o.authToken;const a=await i.get(`https://cosmotrade.live/api/admin/getUserDetails/${s}`,{headers:{Authorization:`Bearer ${t}`}});if(a.status===200)return console.log(a),v(a),a}catch(t){t.response?t.response.data.message:t.message}},A=async()=>{try{let s=o.authToken;const t=await i.get(`https://cosmotrade.live/api/admin/payment-request?status=${u}`,{headers:{Authorization:`Bearer ${s}`}});if(t.status===200)return console.log(t),b(t.data),t}catch(s){s.response?s.response.data.message:s.message}},g=async(s,t)=>{try{let a=o.authToken;const r=await i.patch(`https://cosmotrade.live/api/admin/confirm-payment/${s}`,{status:t},{headers:{Authorization:`Bearer ${a}`}});if(r.status===200)return f.success("Recharge request confirmed",{...y}),console.log(r),r}catch(a){a.response?a.response.data.message:a.message}};return n.useEffect(()=>{A()},[u]),e.jsxs("div",{children:[e.jsx(R,{}),e.jsxs("div",{className:"flex-div",children:[e.jsx(C,{}),e.jsxs("div",{className:"admin-rightSection",children:[e.jsx($,{}),e.jsxs("form",{onSubmit:k,className:"form-rechrge",children:[e.jsx("h3",{className:"text-centre",children:"Submit Qr Code"}),e.jsx("label",{children:"Enter Qr Code Link"}),e.jsx("input",{type:"text",value:m,placeholder:"Enter QR code",onChange:s=>{x(s.target.value)}}),e.jsx("label",{children:"Enter UPI Id"}),e.jsx("input",{type:"text",value:p,placeholder:"Enter UPI Id",onChange:s=>{h(s.target.value)}}),e.jsx("button",{type:"submit",children:"Submit"})]}),e.jsxs("div",{className:"row tab-btns",children:[e.jsx("button",{className:"col-4",onClick:()=>{l("confirmed")},children:"Approved List"}),e.jsx("button",{className:"col-4",onClick:()=>{l("pending")},children:"Pending List"}),e.jsx("button",{className:"col-4",onClick:()=>{l("cancelled")},children:"Reject List"})]}),j&&j.map((s,t)=>e.jsx(d,{children:e.jsxs(d.Item,{eventKey:t,children:[e.jsxs(d.Header,{onClick:()=>{I(s.userId)},children:[e.jsxs("p",{style:{marginRight:"1.3rem"},children:["User Id: ",s.userId]}),e.jsxs("p",{style:{marginRight:"1.3rem"},children:["Amount: ",s.amount]}),e.jsxs("p",{style:{marginRight:"1.3rem"},children:["Status: ",s.status]})]}),e.jsxs(d.Body,{children:[e.jsxs("p",{children:["UID: ",c&&c.data.data.userDetails.UID]}),e.jsxs("p",{children:["Phone: ",c&&c.data.data.userDetails.phoneNumber]}),e.jsxs("p",{children:["Upi ReferenceNo: ",s.upiReferenceNo]}),e.jsxs("p",{children:["Upi Id: ",s.upiId]}),e.jsx("button",{className:"prime-approve-btn",onClick:()=>{g(s._id,"confirm")},children:"Approve"}),e.jsx("button",{onClick:()=>{g(s._id,"cancel")},className:"prime-reject-btn",children:"Reject"})]})]})},t))]})]})]})}export{B as default,y as toastProps};
