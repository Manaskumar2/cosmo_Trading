import{r as d,d as C,h as $,j as e}from"./index-70e3bcd7.js";import{A as W,S as I}from"./Side-3a346d97.js";/* empty css             */import{M as o}from"./Modal-713a1fa7.js";import{B as R}from"./Button-76121a0f.js";import{a as h}from"./axios-4a70c6fc.js";import{I as T,_ as x}from"./index-4ecd74d8.js";import"./TransitionWrapper-30149e25.js";import"./createWithBsPrefix-2edff448.js";import"./index-5ace8bc0.js";import"./Button-45153135.js";const j={position:"top-center",duration:2e3,style:{fontSize:"1rem",background:"#fff",color:"#333"}};function G(){const[y,g]=d.useState(!1),u=()=>g(!1),b=()=>g(!0),[m,f]=d.useState(""),[r,p]=d.useState("confirmed"),[n,k]=d.useState(null),[w,D]=d.useState(null),[i,N]=d.useState(null),c=C($),B=async t=>{try{let s=c.authToken;const a=await h.get(`https://cosmotrade.live/api/admin/getUserDetails/${t}`,{headers:{Authorization:`Bearer ${s}`}});if(a.status===200)return k(a),b(),a}catch(s){s.response?s.response.data.message:s.message}},v=async()=>{try{let t=c.authToken;const s=await h.get(`https://cosmotrade.live/api/admin/getWithdrawRequest?status=${r}`,{headers:{Authorization:`Bearer ${t}`}});if(s.status===200)return D(s.data),s}catch(t){t.response?t.response.data.message:t.message}},S=async t=>{try{let s=c.authToken;const a=await h.get(`https://cosmotrade.live/api/admin/getbankDetails/${t}`,{headers:{Authorization:`Bearer ${s}`}});if(a.status===200)return N(a),b(),a}catch(s){s.response?s.response.data.message:s.message}},A=async(t,s)=>{if(m!=="")try{let a=c.authToken;const l=await h.put(`https://cosmotrade.live/api/admin/conformWithdrawRequest/${t}`,{newStatus:s,approvedBy:m},{headers:{Authorization:`Bearer ${a}`}});if(l.status===200)return u(),f(""),x.success("Withdraw request confirmed",{...j}),v(),l}catch(a){const l=a.response?a.response.data.message:a.message;x.error(l||"Something went wrong",{...j})}else x.error("Write Your Name first",{...j})};return d.useEffect(()=>{v()},[r]),e.jsxs("div",{children:[e.jsx(W,{}),e.jsxs("div",{className:"flex-div",children:[e.jsx(I,{}),e.jsxs("div",{className:"admin-rightSection",children:[e.jsxs("div",{className:"row tab-btns",children:[e.jsx("button",{className:r==="confirmed"?"col-4 active-tab-btn-adminPage":"col-4 tab-btn",onClick:()=>{p("confirmed")},children:"Approved List"}),e.jsx("button",{className:r==="pending"?"col-4 active-tab-btn-adminPage":"col-4 tab-btn",onClick:()=>{p("pending")},children:"Pending List"}),e.jsx("button",{className:r==="cancelled"?"col-4 active-tab-btn-adminPage":"col-4 tab-btn",onClick:()=>{p("cancelled")},children:"Reject List"})]}),e.jsx(T,{}),e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-row",children:[e.jsx("th",{children:"Transaction Id"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Request Time"}),r!=="pending"&&e.jsx("th",{children:"Action Time"}),e.jsx("th",{children:"Status"}),r!="pending"&&e.jsx("th",{children:"Action Done By"}),e.jsx("th",{children:"Details"})]})}),e.jsx("tbody",{children:w&&w.data.map((t,s)=>e.jsxs("tr",{className:"table-row",children:[e.jsx("td",{children:t._id}),e.jsxs("td",{children:["  ",t.withdrawAmount]}),e.jsx("td",{children:new Date(t.createdAt).toLocaleString()}),r!=="pending"&&e.jsx("td",{children:new Date(t.updatedAt).toLocaleString()}),e.jsx("td",{children:t.status}),r!=="pending"&&e.jsx("td",{children:t.approvedBy}),e.jsxs("td",{children:[" ",e.jsx("button",{type:"button",class:"btn btn-primary",onClick:()=>{S(t.userId),B(t.userId)},children:"Details"})," "]}),e.jsxs(o,{show:y,onHide:u,size:"lg",centered:!0,children:[e.jsx(o.Header,{closeButton:!0,children:e.jsx(o.Title,{children:"User Details"})}),e.jsx(o.Body,{className:"userModalBody",children:e.jsxs("div",{style:{display:"flex"},children:[e.jsxs("div",{className:"admin-withdraw-data",children:[e.jsx("h3",{children:"User Details"}),e.jsxs("p",{children:["UID: ",n&&n.data.data.userDetails.UID]}),e.jsxs("p",{children:["Phone: ",n&&n.data.data.userDetails.phoneNumber]}),e.jsxs("p",{children:["Wallet Amount: ",n&&n.data.data.userDetails.walletAmount]}),e.jsxs("p",{children:["Commission Amount: ",n&&n.data.data.userDetails.commissionAmount]}),e.jsxs("p",{children:["Winning Amount: ",n&&n.data.data.userDetails.winningAmount]}),e.jsxs("p",{children:["Downline Count: ",n&&n.data.data.userDetails.downline.length]})]}),e.jsx("div",{style:{marginLeft:"6rem"},children:i&&e.jsxs("div",{className:"admin-withdraw-data",children:[e.jsx("h3",{children:"Bank Data"}),e.jsxs("p",{children:["Account Holder Name: ",i.data.data.accountHolderName]}),e.jsxs("p",{children:["Bank Name: ",i.data.data.bankName]}),e.jsxs("p",{children:["Account No: ",i.data.data.bankAccountNo]}),e.jsxs("p",{children:["Ifsc Code: ",i.data.data.ifscCode]}),e.jsxs("p",{children:["Branch Address: ",i.data.data.bankBranchAddress]}),e.jsxs("p",{children:["City: ",i.data.data.city]}),t.status!=="confirmed"&&t.status!=="cancelled"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[" ",e.jsx("input",{type:"text",value:m,onChange:a=>{f(a.target.value)},placeholder:"Enter Name",className:"name-input-admin"})," "]}),e.jsxs("div",{className:"flex-div",children:[e.jsx("button",{onClick:()=>{A(t._id,"confirmed")},className:"prime-approve-btn",children:"Approve"})," ",e.jsx("button",{onClick:()=>{A(t._id,"cancelled")},className:"prime-reject-btn",children:"Reject"})]})]})]})})]})}),e.jsx(o.Footer,{children:e.jsx(R,{variant:"secondary",onClick:u,children:"Close"})})]})]},s))})]})]})]})]})}export{G as default,j as toastProps};
