import{r as i,d as k,A as v,j as e}from"./index-06905fe0.js";import{A as N,S as D}from"./Side-409894b0.js";import{a as d}from"./axios-4a70c6fc.js";import{A as c}from"./Accordion-d02f0e7a.js";import{I as b,_ as y}from"./index-678a5655.js";import"./TransitionWrapper-9fbc955e.js";import"./react-lifecycles-compat.es-22c986ff.js";const C={position:"top-center",duration:2e3,style:{fontSize:"1rem",background:"#fff",color:"#333"}};function _(){const[m,l]=i.useState("confirmed"),[n,x]=i.useState(null),[u,j]=i.useState(null),[r,f]=i.useState(null),o=k(v),A=async a=>{try{let s=o.authToken;const t=await d.get(`https://cosmotrade.live/api/admin/getUserDetails/${a}`,{headers:{Authorization:`Bearer ${s}`}});if(t.status===200)return console.log(t),x(t),t}catch(s){s.response?s.response.data.message:s.message}},g=async()=>{try{let a=o.authToken;const s=await d.get(`https://cosmotrade.live/api/admin/getWithdrawRequest?status=${m}`,{headers:{Authorization:`Bearer ${a}`}});if(s.status===200)return console.log(s),j(s.data),s}catch(a){a.response?a.response.data.message:a.message}},w=async a=>{try{let s=o.authToken;const t=await d.get(`https://cosmotrade.live/api/admin/getbankDetails/${a}`,{headers:{Authorization:`Bearer ${s}`}});if(t.status===200)return console.log(t),f(t),t}catch(s){s.response?s.response.data.message:s.message}},p=async(a,s)=>{try{let t=o.authToken;const h=await d.put(`https://cosmotrade.live/api/admin/conformWithdrawRequest/${a}`,{newStatus:s},{headers:{Authorization:`Bearer ${t}`}});if(h.status===200)return y.success("Withdraw request confirmed",{...C}),console.log(h),h}catch(t){t.response?t.response.data.message:t.message}};return i.useEffect(()=>{g()},[m]),e.jsxs("div",{children:[e.jsx(N,{}),e.jsxs("div",{className:"flex-div",children:[e.jsx(D,{}),e.jsxs("div",{className:"admin-rightSection",children:[e.jsxs("div",{className:"row tab-btns",children:[e.jsx("button",{className:"col-4",onClick:()=>{l("confirmed")},children:"Approved List"}),e.jsx("button",{className:"col-4",onClick:()=>{l("pending")},children:"Pending List"}),e.jsx("button",{className:"col-4",onClick:()=>{l("cancelled")},children:"Reject List"})]}),e.jsx(b,{}),u&&u.data.map((a,s)=>e.jsx(c,{children:e.jsxs(c.Item,{eventKey:s,children:[e.jsx(c.Header,{onClick:()=>{w(a.userId),A(a.userId)},children:e.jsxs("div",{className:"admin-Widthdraw-box",children:[e.jsxs("p",{children:["User Id : ",a.userId]}),e.jsxs("p",{children:["Amount : ",a.withdrawAmount]}),e.jsxs("p",{children:["Status : ",a.status]})]})}),e.jsx(c.Body,{children:e.jsxs("div",{className:"flex-div",children:[e.jsxs("div",{className:"admin-withdraw-data",children:[e.jsx("h3",{children:"User Details"}),e.jsxs("p",{children:["UID: ",n&&n.data.data.userDetails.UID]}),e.jsxs("p",{children:["Phone: ",n&&n.data.data.userDetails.phoneNumber]}),e.jsxs("p",{children:["Wallet Amount: ",n&&n.data.data.userDetails.walletAmount]}),e.jsxs("p",{children:["Commission Amount: ",n&&n.data.data.userDetails.commissionAmount]}),e.jsxs("p",{children:["Winning Amount: ",n&&n.data.data.userDetails.winningAmount]}),e.jsxs("p",{children:["Downline Count: ",n&&n.data.data.userDetails.downline.length]})]}),e.jsxs("div",{style:{marginLeft:"6rem"},children:[e.jsx("h3",{children:"Bank Data"}),r&&e.jsxs("div",{className:"admin-withdraw-data",children:[e.jsxs("p",{children:["Account Holder Name: ",r.data.data.accountHolderName]}),e.jsxs("p",{children:["Email: ",r.data.data.email]}),e.jsxs("p",{children:["Bank Name: ",r.data.data.bankName]}),e.jsxs("p",{children:["Account No: ",r.data.data.bankAccountNo]}),e.jsxs("p",{children:["Ifsc Code: ",r.data.data.ifscCode]}),e.jsxs("p",{children:["Branch Address: ",r.data.data.bankBranchAddress]}),e.jsxs("p",{children:["City: ",r.data.data.city]}),e.jsxs("div",{className:"flex-div",children:[e.jsx("button",{onClick:()=>{p(a._id,"confirmed")},className:"prime-approve-btn",children:"Approve"})," ",e.jsx("button",{onClick:()=>{p(a._id,"cancelled")},className:"prime-reject-btn",children:"Reject"})]})]})]})]})})]})},s))]})]})]})}export{_ as default,C as toastProps};
