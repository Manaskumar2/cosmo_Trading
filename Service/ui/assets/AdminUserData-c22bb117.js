import{f as ne,R as re,r as n,u as oe,d as ie,h as de,a as ce,j as e}from"./index-f906ecb4.js";import{A as le,S as he}from"./Side-929e587e.js";import{a as i}from"./axios-4a70c6fc.js";import{M as d}from"./Modal-231aef4c.js";/* empty css             */import{I as ue,_ as c}from"./index-b14a3f42.js";import"./TransitionWrapper-5c866097.js";import"./createWithBsPrefix-443d1d82.js";import"./index-02a54322.js";const me=ne({key:"AllUserData",default:null}),l={position:"top-center",duration:2e3,style:{fontSize:"1rem",background:"#fff",color:"#333"}};function fe(){const[E,x]=re.useState(!1),p=()=>{x(!1)},[j,g]=n.useState(""),[v,y]=n.useState(""),[b,k]=n.useState(0),[A,N]=n.useState(""),[W,L]=n.useState(""),[f,S]=n.useState(""),[C,w]=n.useState(""),[D,U]=n.useState(""),[B,P]=n.useState(""),[I,_]=n.useState(""),[$,R]=n.useState(""),[G,J]=n.useState(""),[F,M]=n.useState(0),[T,z]=n.useState(0);oe();const o=ie(de),[r,H]=n.useState(1),[m,O]=n.useState(""),[Q,xe]=n.useState([]),[h,Z]=ce(me),K=async a=>{try{let s=o.authToken;const t=await i.put(`https://cosmotrade.live/api/admin/updateUser/${a}`,{bankName:j,accountHolderName:v,bankAccountNo:b,bankId:G,city:A,ifscCode:f,bankBranchAddress:C,name:D,phoneNumber:B,password:I,parentReferralCode:$,walletAmount:F,rechargeAmount:T},{headers:{Authorization:`Bearer ${s}`}});if(t.status===200)return c.success("User Data Successfully Updated",{...l}),p(),t}catch(s){s.response?s.response.data.message:s.message}},V=async()=>{try{let a=o.authToken;const s=await i.get("https://cosmotrade.live/api/admin/getAllUsers",{headers:{Authorization:`Bearer ${a}`},params:{queryPageIndex:r,queryPageFilter:m}});if(s.status===200)return Z(s),s}catch(a){a.response?a.response.data.message:a.message}},X=async a=>{try{let s=o.authToken;const t=await i.get(`https://cosmotrade.live/api/admin/userAndBankData/${a}`,{headers:{Authorization:`Bearer ${s}`}});if(t.status===200)return g(t.data.bankDetails.bankName),L(t.data.user._id),y(t.data.bankDetails.accountHolderName),k(t.data.bankDetails.bankAccountNo),N(t.data.bankDetails.city),S(t.data.bankDetails.ifscCode),w(t.data.bankDetails.bankBranchAddress),U(t.data.user.name),J(t.data.bankDetails._id),P(t.data.user.phoneNumber),_(t.data.user.password),R(t.data.user.parentReferralCode),M(t.data.user.walletAmount.toFixed(2)),z(t.data.user.rechargeAmount.toFixed(2)),x(!0),t}catch(s){s.response?s.response.data.message:s.message}},Y=async a=>{try{let s=o.authToken;const t=await i.patch(`https://cosmotrade.live/api/admin/activateUser/${a}`,{},{headers:{Authorization:`Bearer ${s}`}});if(t.status===200)return c.success("User Activated",{...l}),t}catch(s){const t=s.response?s.response.data.message:s.message;console.error(t)}},ee=async a=>{try{let s=o.authToken,t=o._id;const u=await i.patch(`https://cosmotrade.live/api/admin/deactivateUser/${a}`,{},{headers:{Authorization:`Bearer ${s}`}});if(u.status===200)return c.success("User Deactivated",{...l}),u}catch(s){const t=s.response?s.response.data.message:s.message;console.error(t)}};n.useEffect(()=>{V()},[r,m,Q]);const q=h&&h.data.response.totalPages,te=()=>{r>1&&H(r-1)},ae=()=>{r<q&&H(r+1)},se=async(a,s)=>{try{const t=await i.post("https://cosmotrade.live/api//signIn",{phoneNumber:a,password:s});if(t.status===200)return c.success("Welcome to our Gaming Zone",{...l}),sessionStorage.setItem("authUserToken",JSON.stringify(t.data.data)),window.open("/","_blank"),t}catch(t){const u=t.response?t.response.data.message:t.message;c.error(u||"Something went wrong",{...l})}};return e.jsxs("div",{children:[e.jsx(le,{}),e.jsxs("div",{className:"flex-div",children:[e.jsx(he,{}),e.jsxs("div",{className:"admin-rightSection",children:[e.jsx(ue,{}),e.jsx("input",{type:"number",className:"user-input",value:m,onChange:a=>{O(a.target.value)},placeholder:"Search Number / UID"}),e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-row",children:[e.jsx("th",{children:"UID"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{children:"Password"}),e.jsx("th",{children:"Total Downline"}),e.jsx("th",{children:"Parent Id"}),e.jsx("th",{children:"Commission Earned"}),e.jsx("th",{children:"Wallet Amount"}),e.jsx("th",{children:"Winning Amount"}),e.jsx("th",{children:"User Details"}),e.jsx("th",{children:"Actions"}),e.jsx("th",{children:"Login"})]})}),e.jsx("tbody",{children:h&&h.data.response.getUsers.map((a,s)=>e.jsxs("tr",{className:"table-row",children:[e.jsx("td",{children:a.UID}),e.jsx("td",{children:a.name}),e.jsx("td",{children:a.phoneNumber}),e.jsx("td",{children:a.password}),e.jsx("td",{children:a.downline.length}),e.jsx("td",{children:a.parentUserUid}),e.jsx("td",{children:a.commissionAmount.toFixed(2)}),e.jsx("td",{children:a.walletAmount.toFixed(2)}),e.jsx("td",{children:a.winningAmount.toFixed(2)}),e.jsxs("td",{children:[e.jsx("button",{type:"button",class:"btn btn-primary","data-toggle":"modal","data-target":"#exampleModalCenter",variant:"primary",onClick:()=>{X(a._id)},children:"Details"}),e.jsxs(d,{show:E,onHide:p,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[e.jsx(d.Header,{closeButton:!0,children:e.jsx(d.Title,{id:"contained-modal-title-vcenter",children:"User Personal & Bank Data"})}),e.jsxs(d.Body,{className:"userModalBody",children:[e.jsxs("div",{children:[e.jsx("h5",{children:"Personal Details"}),e.jsxs("div",{children:["  User Name :  ",e.jsx("input",{type:"text",value:D,onChange:t=>{U(t.target.value)}})," "]}),e.jsxs("div",{children:[" Password :  ",e.jsx("input",{type:"text",value:I,onChange:t=>{_(t.target.value)}})," "]}),e.jsxs("div",{children:[" PhoneNumber :  ",e.jsx("input",{type:"text",value:B,onChange:t=>{P(t.target.value)}})," "]}),e.jsxs("div",{children:[" Parent Referral Code :  ",e.jsx("input",{type:"text",value:$,onChange:t=>{R(t.target.value)}})," "]}),e.jsxs("div",{children:[" Wallet Amount :  ",e.jsx("input",{type:"text",value:F,onChange:t=>{M(t.target.value)}})," "]}),e.jsxs("div",{children:[" Recharge Amount :  ",e.jsx("input",{type:"text",value:T,onChange:t=>{z(t.target.value)}})," "]})]}),e.jsxs("div",{children:[e.jsx("h5",{children:"Bank Details"}),e.jsxs("div",{children:[" Bank Name :  ",e.jsx("input",{type:"text",value:j,onChange:t=>{g(t.target.value)}})," "]}),e.jsxs("div",{children:[" Account Holder Name :  ",e.jsx("input",{type:"text",value:v,onChange:t=>{y(t.target.value)}})," "]}),e.jsxs("div",{children:[" Bank Account No :  ",e.jsx("input",{type:"text",value:b,onChange:t=>{k(t.target.value)}})," "]}),e.jsxs("div",{children:[" City :  ",e.jsx("input",{type:"text",value:A,onChange:t=>{N(t.target.value)}})," "]}),e.jsxs("div",{children:[" IFSC Code :  ",e.jsx("input",{type:"text",value:f,onChange:t=>{S(t.target.value)}})," "]}),e.jsxs("div",{children:[" Bank Branch Address :  ",e.jsx("input",{type:"text",value:C,onChange:t=>{w(t.target.value)}})," "]})]})]}),e.jsx(d.Footer,{style:{textAlign:"center"},children:e.jsx("button",{onClick:()=>K(W),className:"userUpdate",children:"Submit"})})]})]}),e.jsxs("td",{children:[e.jsx("button",{onClick:()=>Y(a._id),className:"activate",children:"Activate"}),e.jsx("button",{onClick:()=>ee(a._id),className:"deactivate",children:"Deactivate"})]}),e.jsx("td",{children:e.jsx("button",{className:"login-user",onClick:()=>{se(a.phoneNumber,a.password)},children:"Login"})})]},s))})]}),e.jsxs("div",{className:"inc-dec-btns",children:[e.jsx("button",{onClick:te,children:"-"}),e.jsxs("div",{children:[r,"/",q]}),e.jsx("button",{onClick:ae,children:"+"})]})]})]})]})}export{fe as default,l as toastProps};
